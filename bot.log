 2025-07-31 16:00:30,001 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:00:30,002 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:00:30,003 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:00:30,642 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:00:30,644 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:00:30,645 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:00:38,279 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:00:38,279 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:00:38,281 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:00:43,526 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:00:43,529 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:00:43,530 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:00:47,986 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:00:47,988 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:00:47,989 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:00:50,696 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:00:50,697 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:00:50,698 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:01:05,385 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 16:01:05,391 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 16:01:05,394 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 16:01:05,395 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 16:01:05,395 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 16:01:05,395 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 16:01:05,395 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 16:01:05,395 - __main__ - INFO - 📍 Location system initialized
2025-07-31 16:01:05,979 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 16:01:06,426 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 16:01:06,569 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 16:01:06,571 - telegram.ext.Application - INFO - Application started
2025-07-31 16:01:16,983 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:01:25,198 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:01:25,201 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:01:25,201 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:01:25,201 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:01:25,202 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:01:25,202 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 16:01:30,494 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 16:01:30,494 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 16:01:30,494 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:01:30,494 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 16:01:30,494 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 16:01:30,494 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:01:30,997 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:01:30,998 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 16:01:31,598 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:01:33,330 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 16:01:33,867 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 16:01:33,869 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:01:33,878 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 16:01:34,273 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:01:34,275 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:01:34,710 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:01:36,215 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:01:36,645 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:01:38,555 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:01:38,558 - __main__ - INFO - [CALLBACK] Received from 5462740970: schemes
2025-07-31 16:01:38,861 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:01:39,197 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:01:40,597 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:01:40,599 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_category_student
2025-07-31 16:01:40,939 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:01:41,294 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:01:42,777 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:01:42,780 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_scholarships
2025-07-31 16:01:43,101 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:01:43,430 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:01:44,662 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:01:44,665 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_apply_csc_scholarships
2025-07-31 16:01:44,969 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:01:44,971 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'block_selection'}
2025-07-31 16:01:44,973 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'block_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam']}
2025-07-31 16:01:45,298 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:01:46,703 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:01:46,706 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_block_3
2025-07-31 16:01:47,036 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:01:47,038 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146'}
2025-07-31 16:01:47,042 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam']}
2025-07-31 16:01:47,359 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:01:48,636 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:01:48,639 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_gpu_3
2025-07-31 16:01:48,970 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:01:48,971 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam'], 'gpu': 'Thingling'}
2025-07-31 16:01:48,973 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam'], 'gpu': 'Thingling', 'subdivision': 'N/A'}
2025-07-31 16:01:49,308 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:01:51,228 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:01:51,229 - __main__ - INFO - [CALLBACK] Received from 5462740970: csc_submit_application
2025-07-31 16:01:51,539 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:01:51,541 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'certificate', 'stage': 'gpu'}
2025-07-31 16:01:51,856 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:02:01,341 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:02:01,344 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:02:01,345 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:02:01,345 - __main__ - INFO - 📍 [DEBUG] Has text: Jhg
2025-07-31 16:02:01,346 - __main__ - INFO - [MSG] User 5462740970: Jhg
2025-07-31 16:02:01,346 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 16:02:01,346 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Jhg
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:02:03,899 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 16:02:03,901 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'certificate', 'stage': 'gpu', 'last_gpu': 'JHG'}
2025-07-31 16:02:04,506 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:02:11,482 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:02:21,698 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:02:31,841 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:02:41,979 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:02:52,269 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:03:02,407 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:03:12,544 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:03:22,684 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:03:32,825 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:03:42,964 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:03:53,102 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:04:03,395 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:04:13,535 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:04:30,881 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 16:04:30,887 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 16:04:30,892 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 16:04:30,893 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 16:04:30,893 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 16:04:30,893 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 16:04:30,894 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 16:04:30,894 - __main__ - INFO - 📍 Location system initialized
2025-07-31 16:04:31,496 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 16:04:31,988 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 16:04:32,200 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 16:04:32,210 - telegram.ext.Application - INFO - Application started
2025-07-31 16:04:42,644 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:04:52,785 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:05:02,924 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:05:13,066 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:05:23,207 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:05:33,344 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:05:43,570 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:05:53,709 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:06:03,845 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:06:13,984 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:06:24,121 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:06:34,257 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:06:44,400 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:06:54,597 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:07:04,732 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:07:14,868 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:07:25,007 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:07:35,149 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:07:45,289 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:07:55,432 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:08:05,585 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:08:15,728 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:08:25,864 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:08:36,001 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:08:46,140 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:08:56,283 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:09:06,424 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:09:16,570 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:09:26,706 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:09:36,845 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:09:46,988 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:09:57,132 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:10:07,267 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:10:17,410 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:10:27,547 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:10:37,685 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:10:47,821 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:10:57,958 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:11:08,096 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:11:19,556 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 16:11:19,565 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 16:11:19,571 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 16:11:19,572 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 16:11:19,572 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 16:11:19,572 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 16:11:19,573 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 16:11:19,573 - __main__ - INFO - 📍 Location system initialized
2025-07-31 16:11:20,173 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 16:11:20,625 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 16:11:20,765 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 16:11:20,767 - telegram.ext.Application - INFO - Application started
2025-07-31 16:11:31,190 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:11:41,340 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:11:51,484 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:12:01,639 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:12:11,783 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:12:21,926 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:12:32,067 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:12:42,211 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:12:52,353 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:13:02,503 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:13:12,643 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:13:22,782 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:13:26,432 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:13:26,434 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:13:26,435 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:13:26,435 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:13:26,436 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:13:26,436 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 16:13:31,652 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 16:13:31,652 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 16:13:31,652 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:13:31,652 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 16:13:31,652 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 16:13:31,652 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:13:32,106 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:13:32,106 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 16:13:32,764 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:13:35,020 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 16:13:35,508 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 16:13:35,510 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:13:35,513 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 16:13:35,823 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:13:35,825 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:13:36,140 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:13:37,653 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:13:37,976 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:13:40,340 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:13:40,343 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 16:13:40,659 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:13:40,986 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:13:42,823 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:13:42,825 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 16:13:43,132 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:13:43,528 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:13:45,028 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:13:45,031 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_sc
2025-07-31 16:13:45,458 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:13:45,880 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:13:55,171 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:14:05,314 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:14:15,455 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:14:25,597 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:14:35,741 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:14:45,892 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:14:56,073 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:15:06,215 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:15:16,355 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:15:26,497 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:15:36,644 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:15:46,788 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:15:56,933 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:16:07,217 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:16:17,363 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:16:28,696 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 16:16:28,705 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 16:16:28,709 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 16:16:28,710 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 16:16:28,711 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 16:16:28,711 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 16:16:28,712 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 16:16:28,712 - __main__ - INFO - 📍 Location system initialized
2025-07-31 16:16:29,297 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 16:16:29,773 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 16:16:29,913 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 16:16:29,916 - telegram.ext.Application - INFO - Application started
2025-07-31 16:16:38,044 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:16:38,046 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:16:38,048 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:16:38,049 - __main__ - INFO - 📍 [DEBUG] Has text: Helo
2025-07-31 16:16:38,049 - __main__ - INFO - [MSG] User 5462740970: Helo
2025-07-31 16:16:38,049 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Helo"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 16:16:40,812 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 16:16:40,812 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 16:16:40,813 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:16:40,813 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 16:16:40,813 - __main__ - INFO - [INTENT] Processing new message: Helo
2025-07-31 16:16:40,813 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Helo
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:16:41,256 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:16:41,256 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 16:16:41,963 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:16:43,691 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 16:16:44,159 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 16:16:44,159 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:16:44,161 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 16:16:44,552 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:16:44,554 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:16:44,874 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:16:46,382 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:16:46,714 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:16:49,165 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:16:49,167 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 16:16:49,474 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:16:49,820 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:16:51,798 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:16:51,800 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 16:16:52,106 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:16:52,433 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:16:54,685 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:16:54,688 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_employment
2025-07-31 16:16:54,996 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:16:55,344 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:17:04,836 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:17:15,136 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:17:25,285 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:17:35,428 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:17:45,577 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:17:55,727 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:18:05,875 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:18:16,023 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:18:26,170 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:18:29,938 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:18:29,940 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:18:29,940 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:18:29,940 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:18:29,940 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:18:29,940 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 16:18:32,579 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 16:18:32,579 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 16:18:32,580 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:18:32,580 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 16:18:32,581 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 16:18:32,581 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:18:33,054 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:18:33,054 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 16:18:33,681 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:18:34,142 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 16:18:34,846 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 16:18:40,088 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:18:48,606 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:18:48,611 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 16:18:49,232 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:18:49,233 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:18:49,548 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:18:51,062 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:18:51,387 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:18:53,908 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:18:53,914 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 16:18:54,225 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:18:54,550 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:18:56,461 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:18:56,464 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 16:18:56,893 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:18:57,326 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:18:58,785 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:18:58,790 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_employment
2025-07-31 16:18:59,124 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:18:59,447 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:19:08,951 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:19:19,098 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:19:29,240 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:19:39,388 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:19:49,533 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:19:59,720 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:20:09,961 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:20:20,111 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:20:30,256 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:20:40,400 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:20:50,548 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:21:00,692 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:21:10,840 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:21:20,987 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:21:31,131 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:21:41,275 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:21:51,477 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:22:01,630 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:22:11,774 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:22:21,920 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:22:32,066 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:22:42,221 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:22:52,368 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:23:02,514 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:23:12,662 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:23:22,807 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:23:32,957 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:23:43,107 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:23:53,259 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:24:09,991 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 16:24:09,997 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 16:24:10,001 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 16:24:10,001 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 16:24:10,002 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 16:24:10,002 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 16:24:10,002 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 16:24:10,002 - __main__ - INFO - 📍 Location system initialized
2025-07-31 16:24:10,577 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 16:24:11,559 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 16:24:11,699 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 16:24:11,701 - telegram.ext.Application - INFO - Application started
2025-07-31 16:24:22,118 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:24:32,257 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:24:42,470 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:24:52,614 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:25:02,758 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:25:12,898 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:25:23,040 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:25:33,186 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:25:43,329 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:25:53,519 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:25:55,599 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:25:55,601 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:25:55,601 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:25:55,602 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:25:55,602 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:25:55,603 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 16:26:00,808 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 16:26:00,808 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 16:26:00,808 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:26:00,808 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 16:26:00,809 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 16:26:00,809 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:26:01,275 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:26:01,275 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 16:26:01,893 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:26:04,258 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 16:26:04,736 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 16:26:04,737 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:26:04,741 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 16:26:05,046 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:26:05,047 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:26:05,363 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:26:06,869 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:26:07,198 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:26:09,690 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:26:09,693 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 16:26:10,470 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:26:10,810 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:26:12,210 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:26:12,212 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 16:26:12,515 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:26:12,834 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:26:14,025 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:26:14,028 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_obc
2025-07-31 16:26:14,332 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:26:14,659 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:26:24,167 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:26:34,308 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:26:44,453 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:26:54,634 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:27:04,949 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:27:15,097 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:27:25,237 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:27:35,382 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:27:45,521 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:27:55,663 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:28:05,806 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:28:15,950 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:28:26,094 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:28:36,246 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:28:46,450 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:28:56,607 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:29:06,755 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:29:16,919 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:29:27,061 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:29:37,202 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:29:47,392 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:29:57,534 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:30:07,676 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:30:17,820 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:30:27,966 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:30:38,110 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:30:48,251 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:30:58,396 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:31:08,547 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:31:18,686 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:31:28,831 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:31:38,972 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:31:49,114 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:31:59,263 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:32:09,401 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:32:19,545 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:32:29,686 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:32:39,833 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:32:49,977 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:33:00,135 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:33:10,280 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:33:20,432 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:33:30,575 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:33:40,716 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:33:50,857 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:34:01,001 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:34:11,141 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:34:21,282 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:34:31,424 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:34:41,574 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:34:51,718 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:35:01,864 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:35:12,143 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:35:22,707 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:35:32,925 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:35:43,068 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:35:53,425 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:36:03,786 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:36:13,932 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:36:24,072 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:36:34,218 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:36:38,018 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 16:36:38,025 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 16:36:38,028 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 16:36:38,029 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 16:36:38,029 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 16:36:38,029 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 16:36:38,030 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 16:36:38,030 - __main__ - INFO - 📍 Location system initialized
2025-07-31 16:36:38,669 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 16:36:39,112 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 16:36:39,250 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 16:36:39,253 - telegram.ext.Application - INFO - Application started
2025-07-31 16:36:39,686 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:36:39,686 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:39,687 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:43,849 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:36:43,850 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:43,850 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:45,003 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:36:45,005 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:45,006 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:49,639 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:36:49,641 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:49,642 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:51,288 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:36:51,290 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:51,290 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:56,681 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:36:56,682 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:56,682 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:59,078 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:36:59,079 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:36:59,081 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:02,610 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:37:02,613 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:02,615 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:06,145 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:37:06,146 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:06,146 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:11,649 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:37:11,650 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:11,650 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:17,148 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:37:17,150 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:17,151 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:25,176 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:37:25,178 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:25,178 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:33,335 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:37:33,337 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:33,338 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:43,332 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:37:45,212 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:37:45,213 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:45,215 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:49,366 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:37:49,367 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:49,368 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:37:56,369 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:38:06,511 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:38:06,866 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:38:06,868 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:38:06,868 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:38:11,006 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:38:11,008 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:38:11,009 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:38:18,006 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:38:28,154 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:38:37,044 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:38:37,045 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:38:37,046 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:38:41,204 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:38:41,206 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:38:41,207 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:38:48,207 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:38:58,351 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:39:08,501 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:39:11,662 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:39:11,662 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:39:11,663 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:39:15,826 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 16:39:15,828 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:39:15,829 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 16:39:22,825 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:39:32,970 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:39:51,443 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 16:39:51,448 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 16:39:51,453 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 16:39:51,453 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 16:39:51,453 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 16:39:51,454 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 16:39:51,454 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 16:39:51,454 - __main__ - INFO - 📍 Location system initialized
2025-07-31 16:39:52,015 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 16:39:52,432 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 16:39:52,566 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 16:39:52,569 - telegram.ext.Application - INFO - Application started
2025-07-31 16:40:02,996 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:40:13,143 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:40:23,324 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:40:33,471 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:40:43,614 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:40:53,758 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:03,903 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:14,046 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:16,329 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:16,331 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:41:16,333 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:41:16,333 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:41:16,333 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:41:16,334 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 16:41:21,509 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 16:41:21,510 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 16:41:21,510 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:41:21,510 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 16:41:21,510 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 16:41:21,511 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:41:21,946 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:41:21,946 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 16:41:22,572 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:41:24,930 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 16:41:25,411 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 16:41:25,412 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:25,415 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 16:41:25,724 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:41:25,726 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:41:26,045 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:41:27,548 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:41:27,880 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:41:29,609 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:29,611 - __main__ - INFO - [CALLBACK] Received from 5462740970: schemes
2025-07-31 16:41:29,921 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:41:30,244 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:41:32,079 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:32,082 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_category_farmer
2025-07-31 16:41:32,535 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:41:32,858 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:41:34,071 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:34,076 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_pmkisan
2025-07-31 16:41:34,389 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:41:34,718 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:41:36,204 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:36,208 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_apply_csc_pmkisan
2025-07-31 16:41:36,522 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:41:36,523 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'block_selection'}
2025-07-31 16:41:36,525 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'block_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam']}
2025-07-31 16:41:36,848 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:41:38,337 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:38,340 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_block_3
2025-07-31 16:41:38,646 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:41:38,647 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146'}
2025-07-31 16:41:38,652 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam']}
2025-07-31 16:41:38,977 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:41:40,160 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:40,164 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_gpu_3
2025-07-31 16:41:40,481 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:41:40,484 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam'], 'gpu': 'Thingling'}
2025-07-31 16:41:40,486 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam'], 'gpu': 'Thingling', 'subdivision': 'N/A'}
2025-07-31 16:41:40,815 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:41:43,686 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:43,688 - __main__ - INFO - [CALLBACK] Received from 5462740970: csc_submit_application
2025-07-31 16:41:44,001 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:41:44,002 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'certificate', 'stage': 'gpu'}
2025-07-31 16:41:44,333 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:41:48,016 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:48,020 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:41:48,020 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:41:48,020 - __main__ - INFO - 📍 [DEBUG] Has text: Yu
2025-07-31 16:41:48,020 - __main__ - INFO - [MSG] User 5462740970: Yu
2025-07-31 16:41:48,021 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 16:41:48,021 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Yu
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:41:50,514 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 16:41:50,516 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'certificate', 'stage': 'gpu', 'last_gpu': 'YU'}
2025-07-31 16:41:51,123 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:41:54,129 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:54,131 - __main__ - INFO - [CALLBACK] Received from 5462740970: main_menu
2025-07-31 16:41:54,435 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:41:54,437 - __main__ - INFO - 🧹 STATE CLEARED: User 5462740970
2025-07-31 16:41:54,437 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:41:54,760 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:41:56,689 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:56,693 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 16:41:57,007 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:41:57,329 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:41:59,874 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:41:59,876 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 16:42:00,180 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:42:00,508 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:42:02,006 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:42:02,008 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_sc
2025-07-31 16:42:02,311 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:42:02,650 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:42:12,151 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:42:22,298 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:42:32,444 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:42:42,587 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:42:52,732 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:43:02,878 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:43:13,024 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:43:23,166 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:43:33,320 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:43:43,463 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:43:53,609 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:46:38,994 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 16:46:38,999 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 16:46:39,003 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 16:46:39,003 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 16:46:39,003 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 16:46:39,003 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 16:46:39,005 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 16:46:39,005 - __main__ - INFO - 📍 Location system initialized
2025-07-31 16:46:39,586 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 16:46:40,338 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 16:46:40,478 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 16:46:40,482 - telegram.ext.Application - INFO - Application started
2025-07-31 16:46:40,914 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:46:40,916 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:46:40,916 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:46:40,916 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:46:40,916 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:46:40,916 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 16:46:43,607 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 16:46:43,607 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 16:46:43,607 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:46:43,608 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 16:46:43,608 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 16:46:43,608 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:46:44,063 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:46:44,063 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 16:46:44,388 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:46:46,407 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 16:46:46,877 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 16:46:46,878 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:46:46,887 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 16:46:47,197 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:46:47,198 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:46:47,518 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:46:49,020 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:46:49,340 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:46:50,715 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:46:50,718 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 16:46:51,023 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:46:51,348 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:46:52,915 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:46:52,919 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 16:46:53,265 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:46:53,590 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:46:54,999 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:46:55,001 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_sc
2025-07-31 16:46:55,302 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:46:55,637 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:47:01,049 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:47:01,051 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:47:01,052 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:47:01,052 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:47:01,054 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:47:01,054 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 16:47:03,800 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 16:47:03,801 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 16:47:03,801 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:47:03,801 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 16:47:03,801 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 16:47:03,801 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:47:04,277 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:47:04,278 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 16:47:05,207 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:47:05,862 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 16:47:06,497 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 16:47:06,498 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:47:06,500 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 16:47:06,901 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:47:06,903 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:47:07,304 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:47:08,810 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:47:09,143 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:47:11,332 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:47:11,336 - __main__ - INFO - [CALLBACK] Received from 5462740970: schemes
2025-07-31 16:47:11,644 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:47:11,963 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:47:13,849 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:47:13,852 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_category_farmer
2025-07-31 16:47:14,204 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:47:14,623 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:47:15,593 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:47:15,595 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_pmkisan
2025-07-31 16:47:15,904 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:47:16,228 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:47:18,284 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:47:18,287 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_apply_csc_pmkisan
2025-07-31 16:47:18,592 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:47:18,593 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'block_selection'}
2025-07-31 16:47:18,595 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'block_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam']}
2025-07-31 16:47:18,928 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:47:20,268 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:47:20,284 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_block_4
2025-07-31 16:47:20,589 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:47:20,591 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': 'BAC - Hee Martam'}
2025-07-31 16:47:20,595 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': 'BAC - Hee Martam', 'available_gpus': ['Berfok Chandabung', 'Bermiok Berthang', 'Martam', 'Pechreak Heepatal', 'Yangsum']}
2025-07-31 16:47:20,916 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:47:21,950 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:47:21,953 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_gpu_4
2025-07-31 16:47:22,260 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:47:22,262 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': 'BAC - Hee Martam', 'available_gpus': ['Berfok Chandabung', 'Bermiok Berthang', 'Martam', 'Pechreak Heepatal', 'Yangsum'], 'gpu': 'Yangsum'}
2025-07-31 16:47:22,265 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': 'BAC - Hee Martam', 'available_gpus': ['Berfok Chandabung', 'Bermiok Berthang', 'Martam', 'Pechreak Heepatal', 'Yangsum'], 'gpu': 'Yangsum', 'subdivision': 'N/A'}
2025-07-31 16:47:22,590 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:47:24,082 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:47:24,085 - __main__ - INFO - [CALLBACK] Received from 5462740970: csc_submit_application
2025-07-31 16:47:24,389 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:47:24,712 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:47:34,230 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:47:44,373 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:47:54,515 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:48:04,656 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:48:14,793 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:48:24,936 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:48:35,079 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:48:45,221 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:48:55,360 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:49:05,508 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:49:15,648 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:49:25,788 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:49:35,926 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:49:46,115 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:49:55,085 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:49:55,086 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:49:55,086 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:49:55,086 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:49:55,086 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:49:55,088 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 16:49:55,088 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:49:57,566 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:50:05,224 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:50:15,363 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:50:25,500 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:50:35,678 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:50:45,817 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:50:51,028 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:50:51,030 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:50:51,030 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:50:51,031 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:50:51,031 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:50:51,031 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 16:50:51,032 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:50:53,546 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:51:01,194 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:51:11,334 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:51:21,479 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:51:31,623 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:51:41,762 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:51:51,904 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:52:02,047 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:52:12,275 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:52:22,416 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:52:32,556 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:52:42,696 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:52:52,837 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:53:18,359 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 16:53:18,365 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 16:53:18,369 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 16:53:18,369 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 16:53:18,369 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 16:53:18,369 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 16:53:18,371 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 16:53:18,371 - __main__ - INFO - 📍 Location system initialized
2025-07-31 16:53:19,071 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 16:53:19,693 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 16:53:19,916 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 16:53:19,918 - telegram.ext.Application - INFO - Application started
2025-07-31 16:53:30,485 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:53:39,395 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:53:39,397 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:53:39,398 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:53:39,398 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:53:39,398 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:53:39,398 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 16:53:42,100 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 16:53:42,101 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 16:53:42,101 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:53:42,101 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 16:53:42,103 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 16:53:42,103 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:53:42,594 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:53:42,594 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 16:53:43,260 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:53:45,068 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 16:53:45,566 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 16:53:45,567 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:53:45,571 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 16:53:45,888 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:53:45,889 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:53:46,240 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:53:47,742 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:53:48,080 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:53:50,267 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:53:50,269 - __main__ - INFO - [CALLBACK] Received from 5462740970: schemes
2025-07-31 16:53:50,575 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:53:50,896 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:53:52,515 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:53:52,516 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_category_farmer
2025-07-31 16:53:52,819 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:53:53,188 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:53:54,167 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:53:54,171 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_pmkisan
2025-07-31 16:53:54,609 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:53:55,054 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:53:56,966 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:53:56,968 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_apply_csc_pmkisan
2025-07-31 16:53:57,320 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:53:57,320 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'block_selection'}
2025-07-31 16:53:57,321 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'block_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam']}
2025-07-31 16:53:57,645 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:53:58,923 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:53:58,925 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_block_4
2025-07-31 16:53:59,271 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:53:59,273 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': 'BAC - Hee Martam'}
2025-07-31 16:53:59,277 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': 'BAC - Hee Martam', 'available_gpus': ['Berfok Chandabung', 'Bermiok Berthang', 'Martam', 'Pechreak Heepatal', 'Yangsum']}
2025-07-31 16:53:59,604 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:54:00,932 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:54:00,934 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_gpu_2
2025-07-31 16:54:01,237 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:54:01,239 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': 'BAC - Hee Martam', 'available_gpus': ['Berfok Chandabung', 'Bermiok Berthang', 'Martam', 'Pechreak Heepatal', 'Yangsum'], 'gpu': 'Martam'}
2025-07-31 16:54:01,241 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': 'BAC - Hee Martam', 'available_gpus': ['Berfok Chandabung', 'Bermiok Berthang', 'Martam', 'Pechreak Heepatal', 'Yangsum'], 'gpu': 'Martam', 'subdivision': 'N/A'}
2025-07-31 16:54:01,568 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:54:03,044 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:54:03,047 - __main__ - INFO - [CALLBACK] Received from 5462740970: csc_submit_application
2025-07-31 16:54:03,351 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:54:03,682 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:54:13,186 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:54:23,323 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:54:33,458 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:54:43,594 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:54:53,731 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:55:03,924 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:55:14,059 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:55:24,199 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:55:34,355 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:55:46,665 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 16:55:46,672 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 16:55:46,675 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 16:55:46,676 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 16:55:46,676 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 16:55:46,676 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 16:55:46,678 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 16:55:46,679 - __main__ - INFO - 📍 Location system initialized
2025-07-31 16:55:47,545 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 16:55:48,067 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 16:55:48,219 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 16:55:48,223 - telegram.ext.Application - INFO - Application started
2025-07-31 16:55:58,671 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:08,819 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:18,965 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:26,971 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:26,974 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:56:26,974 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:56:26,974 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:56:26,974 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:56:26,976 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 16:56:29,849 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 16:56:29,849 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 16:56:29,849 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:56:29,850 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 16:56:29,850 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 16:56:29,850 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:56:30,465 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:56:30,465 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 16:56:31,077 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:56:33,033 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 16:56:33,574 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 16:56:33,576 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:33,579 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 16:56:33,882 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:56:33,885 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:56:34,201 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:56:35,717 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:56:36,043 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:56:41,394 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:41,397 - __main__ - INFO - [CALLBACK] Received from 5462740970: schemes
2025-07-31 16:56:42,003 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:56:42,320 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:56:43,456 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:43,459 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_category_farmer
2025-07-31 16:56:43,766 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:56:44,086 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:56:45,372 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:45,376 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_pmkisan
2025-07-31 16:56:45,681 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:56:46,005 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:56:48,277 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:48,280 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_apply_csc_pmkisan
2025-07-31 16:56:48,586 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:56:48,588 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'block_selection'}
2025-07-31 16:56:48,589 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'block_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam']}
2025-07-31 16:56:48,914 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:56:50,240 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:50,245 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_block_2
2025-07-31 16:56:50,552 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:56:50,553 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961'}
2025-07-31 16:56:50,559 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', 'available_gpus': ['Darap Singpheng', 'Gyalshing Municipal Council', 'Gyalshing Omchung', 'Lingchom Tikjya', 'Nambu Sindrabong', 'Singyang Chumbong', 'Tikjuk Kyongsha', 'Yangtey', 'Yangthang']}
2025-07-31 16:56:50,887 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:56:52,271 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:52,275 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_gpu_5
2025-07-31 16:56:52,581 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:56:52,582 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', 'available_gpus': ['Darap Singpheng', 'Gyalshing Municipal Council', 'Gyalshing Omchung', 'Lingchom Tikjya', 'Nambu Sindrabong', 'Singyang Chumbong', 'Tikjuk Kyongsha', 'Yangtey', 'Yangthang'], 'gpu': 'Singyang Chumbong'}
2025-07-31 16:56:52,586 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', 'available_gpus': ['Darap Singpheng', 'Gyalshing Municipal Council', 'Gyalshing Omchung', 'Lingchom Tikjya', 'Nambu Sindrabong', 'Singyang Chumbong', 'Tikjuk Kyongsha', 'Yangtey', 'Yangthang'], 'gpu': 'Singyang Chumbong', 'subdivision': 'Gyalshing Sub-Division\n\nShri. Sandesh Subba \nSDM\n7548044445\n\n\n\n\nShri. Pulkit \n9306650316\nSDM HQ'}
2025-07-31 16:56:52,935 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:56:54,956 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:56:54,959 - __main__ - INFO - [CALLBACK] Received from 5462740970: csc_submit_application
2025-07-31 16:56:55,265 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:56:55,584 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:57:05,105 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:57:15,278 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:57:25,425 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:57:35,569 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:57:45,715 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:57:55,858 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:58:06,003 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:58:16,147 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:58:26,291 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:58:36,436 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:58:46,578 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:03,511 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 16:59:03,516 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 16:59:03,522 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 16:59:03,523 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 16:59:03,523 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 16:59:03,524 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 16:59:03,525 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 16:59:03,525 - __main__ - INFO - 📍 Location system initialized
2025-07-31 16:59:04,326 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 16:59:04,777 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 16:59:04,919 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 16:59:04,922 - telegram.ext.Application - INFO - Application started
2025-07-31 16:59:09,024 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:09,027 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:59:09,027 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:59:09,028 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 16:59:09,028 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 16:59:09,029 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 16:59:11,850 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 16:59:11,851 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 16:59:11,851 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:59:11,852 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 16:59:11,852 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 16:59:11,853 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:59:12,400 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 16:59:12,400 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 16:59:13,037 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:59:15,220 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 16:59:15,714 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 16:59:19,175 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:26,128 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:26,133 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 16:59:26,730 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:59:26,731 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 16:59:27,057 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:59:28,562 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 16:59:28,895 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:59:33,366 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:33,370 - __main__ - INFO - [CALLBACK] Received from 5462740970: schemes
2025-07-31 16:59:33,676 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:59:34,001 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:59:35,557 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:35,561 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_category_farmer
2025-07-31 16:59:35,866 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:59:36,194 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:59:37,285 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:37,288 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_pmkisan
2025-07-31 16:59:37,597 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:59:37,936 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:59:39,062 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:39,065 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_apply_csc_pmkisan
2025-07-31 16:59:39,376 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:59:39,377 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'block_selection'}
2025-07-31 16:59:39,379 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'block_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam']}
2025-07-31 16:59:39,700 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:59:40,853 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:40,857 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_block_3
2025-07-31 16:59:41,176 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:59:41,178 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146'}
2025-07-31 16:59:41,183 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam']}
2025-07-31 16:59:41,505 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:59:42,463 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:42,466 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_gpu_3
2025-07-31 16:59:42,773 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:59:42,774 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam'], 'gpu': 'Thingling'}
2025-07-31 16:59:42,776 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam'], 'gpu': 'Thingling', 'subdivision': 'N/A'}
2025-07-31 16:59:43,116 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:59:45,091 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:45,095 - __main__ - INFO - [CALLBACK] Received from 5462740970: csc_submit_application
2025-07-31 16:59:45,418 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 16:59:45,420 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'name', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam'], 'gpu': 'Thingling', 'subdivision': 'N/A'}
2025-07-31 16:59:45,751 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 16:59:50,726 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:50,729 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:59:50,731 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:59:50,731 - __main__ - INFO - 📍 [DEBUG] Has text: Abhishek
2025-07-31 16:59:50,732 - __main__ - INFO - [MSG] User 5462740970: Abhishek
2025-07-31 16:59:50,732 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 16:59:50,733 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Abhishek
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:59:53,308 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 16:59:53,309 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'father_name', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam'], 'gpu': 'Thingling', 'subdivision': 'N/A', 'name': 'Abhishek'}
2025-07-31 16:59:53,939 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 16:59:57,468 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 16:59:57,472 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 16:59:57,473 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 16:59:57,473 - __main__ - INFO - 📍 [DEBUG] Has text: Ghumi
2025-07-31 16:59:57,473 - __main__ - INFO - [MSG] User 5462740970: Ghumi
2025-07-31 16:59:57,474 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 16:59:57,474 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Ghumi
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 16:59:58,066 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 16:59:58,066 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'phone', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam'], 'gpu': 'Thingling', 'subdivision': 'N/A', 'name': 'Abhishek', 'father_name': 'Ghumi'}
2025-07-31 16:59:58,396 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:00:04,517 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:00:04,520 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:00:04,520 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:00:04,521 - __main__ - INFO - 📍 [DEBUG] Has text: 8978987878
2025-07-31 17:00:04,521 - __main__ - INFO - [MSG] User 5462740970: 8978987878
2025-07-31 17:00:04,522 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 17:00:04,522 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: 8978987878
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:00:05,063 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 17:00:05,064 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'village', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam'], 'gpu': 'Thingling', 'subdivision': 'N/A', 'name': 'Abhishek', 'father_name': 'Ghumi', 'phone': '8978987878'}
2025-07-31 17:00:05,678 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:00:09,554 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:00:09,557 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:00:09,557 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:00:09,558 - __main__ - INFO - 📍 [DEBUG] Has text: Bhuk
2025-07-31 17:00:09,558 - __main__ - INFO - [MSG] User 5462740970: Bhuk
2025-07-31 17:00:09,559 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 17:00:09,559 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Bhuk
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:00:10,065 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 17:00:10,065 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Pmkisan', 'step': 'village', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'available_gpus': ['Khechuperi', 'Melli Aching', 'Rimbi Timbrong', 'Thingling', 'Yuksam'], 'gpu': 'Thingling', 'subdivision': 'N/A', 'name': 'Abhishek', 'father_name': 'Ghumi', 'phone': '8978987878', 'village': 'Bhuk'}
2025-07-31 17:00:10,633 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 17:00:11,137 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 17:00:11,758 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:00:11,762 - __main__ - INFO - 🧹 STATE CLEARED: User 5462740970
2025-07-31 17:00:19,701 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:00:29,843 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:00:39,985 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:00:50,137 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:01:00,281 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:01:10,425 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:01:20,571 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:01:30,747 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:01:40,887 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:01:51,030 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:02:01,176 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:02:11,332 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:02:21,503 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:02:31,647 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:02:41,793 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:03:00,633 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 17:03:00,643 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 17:03:00,652 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 17:03:00,652 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 17:03:00,652 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 17:03:00,652 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 17:03:00,654 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 17:03:00,654 - __main__ - INFO - 📍 Location system initialized
2025-07-31 17:03:01,588 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 17:03:02,038 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 17:03:02,176 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 17:03:02,180 - telegram.ext.Application - INFO - Application started
2025-07-31 17:03:12,602 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:03:22,756 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:03:32,899 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:03:43,046 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:03:53,185 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:04:03,326 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:04:13,466 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:04:23,609 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:04:33,752 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:04:43,893 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:04:54,048 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:05:04,190 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:05:14,337 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:05:24,478 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:05:34,622 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:05:44,767 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:05:54,908 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:06:05,061 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:06:15,204 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:06:25,347 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:06:35,488 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:06:45,638 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:06:55,786 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:07:05,942 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:07:16,091 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:07:26,237 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:07:36,383 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:07:46,526 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:07:56,672 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:08:06,819 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:08:16,978 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:08:27,132 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:08:37,283 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:08:47,432 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:08:57,587 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:09:07,730 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:09:17,884 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:09:28,032 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:09:38,180 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:09:48,328 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:09:58,473 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:10:08,618 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:10:18,777 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:10:28,921 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:10:39,066 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:10:49,218 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:10:59,364 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:11:09,509 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:11:19,653 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:11:29,801 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:11:31,002 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:11:31,005 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:11:31,006 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:11:31,007 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 17:11:31,007 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 17:11:31,011 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 17:11:37,569 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 17:11:37,569 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 17:11:37,571 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:11:37,571 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 17:11:37,572 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 17:11:37,573 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:11:38,200 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 17:11:38,201 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 17:11:38,840 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:11:43,040 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 17:11:43,535 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 17:11:43,536 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:11:43,538 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 17:11:43,846 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:11:43,850 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:11:44,203 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:11:45,715 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 17:11:46,045 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:11:53,679 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:03,820 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:04,117 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:04,122 - __main__ - INFO - [CALLBACK] Received from 5462740970: schemes
2025-07-31 17:12:04,716 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:12:05,040 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:12:06,540 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:06,545 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_category_student
2025-07-31 17:12:06,853 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:12:07,180 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:12:08,457 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:08,460 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_scholarships
2025-07-31 17:12:08,770 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:12:09,112 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:12:10,971 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:10,974 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_apply_csc_scholarships
2025-07-31 17:12:11,281 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:12:11,282 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'block_selection'}
2025-07-31 17:12:11,285 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'block_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam']}
2025-07-31 17:12:11,607 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:12:12,781 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:12,783 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_block_0
2025-07-31 17:12:13,097 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:12:13,099 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361'}
2025-07-31 17:12:13,105 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', 'available_gpus': ['Arithang Chongrang', 'Dhupidara Narkhola', 'Gerethang Labing', 'Karzi Mangnam', 'Kongri Labdang', 'Tashiding']}
2025-07-31 17:12:13,446 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:12:14,311 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:14,316 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_gpu_4
2025-07-31 17:12:14,621 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:12:14,622 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', 'available_gpus': ['Arithang Chongrang', 'Dhupidara Narkhola', 'Gerethang Labing', 'Karzi Mangnam', 'Kongri Labdang', 'Tashiding'], 'gpu': 'Kongri Labdang'}
2025-07-31 17:12:14,624 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', 'available_gpus': ['Arithang Chongrang', 'Dhupidara Narkhola', 'Gerethang Labing', 'Karzi Mangnam', 'Kongri Labdang', 'Tashiding'], 'gpu': 'Kongri Labdang', 'subdivision': 'Yuksam \nSub-Division\n\nShri. C. S Limboo \nSDM\n9382708359'}
2025-07-31 17:12:14,953 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:12:15,875 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:15,879 - __main__ - INFO - [CALLBACK] Received from 5462740970: csc_submit_application
2025-07-31 17:12:16,184 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:12:16,186 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'name', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', 'available_gpus': ['Arithang Chongrang', 'Dhupidara Narkhola', 'Gerethang Labing', 'Karzi Mangnam', 'Kongri Labdang', 'Tashiding'], 'gpu': 'Kongri Labdang', 'subdivision': 'Yuksam \nSub-Division\n\nShri. C. S Limboo \nSDM\n9382708359'}
2025-07-31 17:12:16,508 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:12:19,579 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:19,583 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:12:19,583 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:12:19,583 - __main__ - INFO - 📍 [DEBUG] Has text: Aghyh
2025-07-31 17:12:19,583 - __main__ - INFO - [MSG] User 5462740970: Aghyh
2025-07-31 17:12:19,584 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 17:12:19,584 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Aghyh
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:12:22,171 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 17:12:22,172 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'father_name', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', 'available_gpus': ['Arithang Chongrang', 'Dhupidara Narkhola', 'Gerethang Labing', 'Karzi Mangnam', 'Kongri Labdang', 'Tashiding'], 'gpu': 'Kongri Labdang', 'subdivision': 'Yuksam \nSub-Division\n\nShri. C. S Limboo \nSDM\n9382708359', 'name': 'Aghyh'}
2025-07-31 17:12:22,810 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:12:24,532 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:24,535 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:12:24,535 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:12:24,536 - __main__ - INFO - 📍 [DEBUG] Has text: Yhehgd
2025-07-31 17:12:24,536 - __main__ - INFO - [MSG] User 5462740970: Yhehgd
2025-07-31 17:12:24,537 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 17:12:24,537 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Yhehgd
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:12:24,921 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 17:12:24,921 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'phone', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', 'available_gpus': ['Arithang Chongrang', 'Dhupidara Narkhola', 'Gerethang Labing', 'Karzi Mangnam', 'Kongri Labdang', 'Tashiding'], 'gpu': 'Kongri Labdang', 'subdivision': 'Yuksam \nSub-Division\n\nShri. C. S Limboo \nSDM\n9382708359', 'name': 'Aghyh', 'father_name': 'Yhehgd'}
2025-07-31 17:12:25,242 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:12:31,137 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:31,141 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:12:31,141 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:12:31,141 - __main__ - INFO - 📍 [DEBUG] Has text: 8888888888
2025-07-31 17:12:31,142 - __main__ - INFO - [MSG] User 5462740970: 8888888888
2025-07-31 17:12:31,142 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 17:12:31,143 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: 8888888888
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:12:31,580 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 17:12:31,581 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'village', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', 'available_gpus': ['Arithang Chongrang', 'Dhupidara Narkhola', 'Gerethang Labing', 'Karzi Mangnam', 'Kongri Labdang', 'Tashiding'], 'gpu': 'Kongri Labdang', 'subdivision': 'Yuksam \nSub-Division\n\nShri. C. S Limboo \nSDM\n9382708359', 'name': 'Aghyh', 'father_name': 'Yhehgd', 'phone': '8888888888'}
2025-07-31 17:12:32,195 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:12:34,955 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:34,959 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:12:34,959 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:12:34,960 - __main__ - INFO - 📍 [DEBUG] Has text: Gsygev
2025-07-31 17:12:34,960 - __main__ - INFO - [MSG] User 5462740970: Gsygev
2025-07-31 17:12:34,960 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 17:12:34,960 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Gsygev
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:12:35,389 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 17:12:35,390 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Scholarships', 'step': 'village', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', 'available_gpus': ['Arithang Chongrang', 'Dhupidara Narkhola', 'Gerethang Labing', 'Karzi Mangnam', 'Kongri Labdang', 'Tashiding'], 'gpu': 'Kongri Labdang', 'subdivision': 'Yuksam \nSub-Division\n\nShri. C. S Limboo \nSDM\n9382708359', 'name': 'Aghyh', 'father_name': 'Yhehgd', 'phone': '8888888888', 'village': 'Gsygev'}
2025-07-31 17:12:35,824 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 17:12:36,320 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 17:12:36,647 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:12:36,649 - __main__ - INFO - 🧹 STATE CLEARED: User 5462740970
2025-07-31 17:12:45,104 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:12:55,245 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:13:05,382 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:13:15,527 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:13:25,670 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:13:35,810 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:13:45,954 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:13:56,096 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:14:06,237 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:14:16,381 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:14:26,523 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:14:36,664 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:14:46,811 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:14:56,952 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:15:07,099 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:15:23,616 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 17:15:23,623 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 17:15:23,628 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 17:15:23,628 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 17:15:23,628 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 17:15:23,630 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 17:15:23,631 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 17:15:23,631 - __main__ - INFO - 📍 Location system initialized
2025-07-31 17:15:24,459 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 17:15:24,941 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 17:15:25,084 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 17:15:25,087 - telegram.ext.Application - INFO - Application started
2025-07-31 17:15:35,535 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:15:45,781 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:15:55,925 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:16:06,075 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:16:16,221 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:16:26,376 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:16:36,520 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:16:46,676 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:16:56,822 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:17:06,970 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:17:17,118 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:17:27,261 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:17:37,404 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:17:47,546 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:17:57,691 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:18:07,837 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:18:17,985 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:18:28,130 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:18:38,274 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:18:48,421 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:18:58,574 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:19:08,720 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:19:16,860 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:19:16,864 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:19:16,865 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:19:16,865 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 17:19:16,865 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 17:19:16,866 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 17:19:22,810 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 17:19:22,812 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 17:19:22,812 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:19:22,812 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 17:19:22,812 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 17:19:22,813 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:19:23,406 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 17:19:23,407 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 17:19:24,096 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:19:26,556 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 17:19:27,054 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 17:19:27,055 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:19:27,058 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 17:19:27,423 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:19:27,425 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:19:27,772 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:19:29,275 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 17:19:29,692 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:19:31,290 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:19:31,293 - __main__ - INFO - [CALLBACK] Received from 5462740970: schemes
2025-07-31 17:19:31,610 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:19:32,018 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:19:33,273 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:19:33,277 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_category_health
2025-07-31 17:19:33,584 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:19:33,914 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:19:38,027 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:19:38,032 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_ayushman
2025-07-31 17:19:38,353 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:19:38,740 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:19:41,667 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:19:41,670 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_apply_csc_ayushman
2025-07-31 17:19:41,977 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:19:41,979 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Ayushman', 'step': 'block_selection'}
2025-07-31 17:19:41,981 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Ayushman', 'step': 'block_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam']}
2025-07-31 17:19:42,315 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:19:51,814 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:20:01,974 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:20:12,119 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:20:18,076 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:20:18,078 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_block_2
2025-07-31 17:20:18,678 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:20:18,680 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Ayushman', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961'}
2025-07-31 17:20:18,686 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Ayushman', 'step': 'gpu_selection', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', 'available_gpus': ['Darap Singpheng', 'Gyalshing Municipal Council', 'Gyalshing Omchung', 'Lingchom Tikjya', 'Nambu Sindrabong', 'Singyang Chumbong', 'Tikjuk Kyongsha', 'Yangtey', 'Yangthang']}
2025-07-31 17:20:19,011 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:20:20,701 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:20:20,704 - __main__ - INFO - [CALLBACK] Received from 5462740970: scheme_csc_gpu_5
2025-07-31 17:20:21,046 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:20:21,047 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Ayushman', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', 'available_gpus': ['Darap Singpheng', 'Gyalshing Municipal Council', 'Gyalshing Omchung', 'Lingchom Tikjya', 'Nambu Sindrabong', 'Singyang Chumbong', 'Tikjuk Kyongsha', 'Yangtey', 'Yangthang'], 'gpu': 'Singyang Chumbong'}
2025-07-31 17:20:21,049 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Ayushman', 'step': 'csc_info', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', 'available_gpus': ['Darap Singpheng', 'Gyalshing Municipal Council', 'Gyalshing Omchung', 'Lingchom Tikjya', 'Nambu Sindrabong', 'Singyang Chumbong', 'Tikjuk Kyongsha', 'Yangtey', 'Yangthang'], 'gpu': 'Singyang Chumbong', 'subdivision': 'Gyalshing Sub-Division\n\nShri. Sandesh Subba \nSDM\n7548044445\n\n\n\n\nShri. Pulkit \n9306650316\nSDM HQ'}
2025-07-31 17:20:21,419 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:20:23,210 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:20:23,213 - __main__ - INFO - [CALLBACK] Received from 5462740970: csc_submit_application
2025-07-31 17:20:23,534 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:20:23,535 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Ayushman', 'step': 'name', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', 'available_gpus': ['Darap Singpheng', 'Gyalshing Municipal Council', 'Gyalshing Omchung', 'Lingchom Tikjya', 'Nambu Sindrabong', 'Singyang Chumbong', 'Tikjuk Kyongsha', 'Yangtey', 'Yangthang'], 'gpu': 'Singyang Chumbong', 'subdivision': 'Gyalshing Sub-Division\n\nShri. Sandesh Subba \nSDM\n7548044445\n\n\n\n\nShri. Pulkit \n9306650316\nSDM HQ'}
2025-07-31 17:20:23,863 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:20:25,940 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:20:25,943 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:20:25,943 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:20:25,943 - __main__ - INFO - 📍 [DEBUG] Has text: Yusb
2025-07-31 17:20:25,944 - __main__ - INFO - [MSG] User 5462740970: Yusb
2025-07-31 17:20:25,944 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 17:20:25,944 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Yusb
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:20:28,405 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 17:20:28,406 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Ayushman', 'step': 'father_name', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', 'available_gpus': ['Darap Singpheng', 'Gyalshing Municipal Council', 'Gyalshing Omchung', 'Lingchom Tikjya', 'Nambu Sindrabong', 'Singyang Chumbong', 'Tikjuk Kyongsha', 'Yangtey', 'Yangthang'], 'gpu': 'Singyang Chumbong', 'subdivision': 'Gyalshing Sub-Division\n\nShri. Sandesh Subba \nSDM\n7548044445\n\n\n\n\nShri. Pulkit \n9306650316\nSDM HQ', 'name': 'Yusb'}
2025-07-31 17:20:28,735 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:20:30,373 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:20:30,376 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:20:30,377 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:20:30,377 - __main__ - INFO - 📍 [DEBUG] Has text: Yhehgd
2025-07-31 17:20:30,378 - __main__ - INFO - [MSG] User 5462740970: Yhehgd
2025-07-31 17:20:30,378 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 17:20:30,378 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Yhehgd
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:20:30,769 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 17:20:30,770 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Ayushman', 'step': 'phone', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', 'available_gpus': ['Darap Singpheng', 'Gyalshing Municipal Council', 'Gyalshing Omchung', 'Lingchom Tikjya', 'Nambu Sindrabong', 'Singyang Chumbong', 'Tikjuk Kyongsha', 'Yangtey', 'Yangthang'], 'gpu': 'Singyang Chumbong', 'subdivision': 'Gyalshing Sub-Division\n\nShri. Sandesh Subba \nSDM\n7548044445\n\n\n\n\nShri. Pulkit \n9306650316\nSDM HQ', 'name': 'Yusb', 'father_name': 'Yhehgd'}
2025-07-31 17:20:31,093 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:20:36,665 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:20:36,669 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:20:36,669 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:20:36,669 - __main__ - INFO - 📍 [DEBUG] Has text: 9999999999
2025-07-31 17:20:36,669 - __main__ - INFO - [MSG] User 5462740970: 9999999999
2025-07-31 17:20:36,671 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 17:20:36,671 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: 9999999999
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:20:37,200 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 17:20:37,201 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Ayushman', 'step': 'village', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', 'available_gpus': ['Darap Singpheng', 'Gyalshing Municipal Council', 'Gyalshing Omchung', 'Lingchom Tikjya', 'Nambu Sindrabong', 'Singyang Chumbong', 'Tikjuk Kyongsha', 'Yangtey', 'Yangthang'], 'gpu': 'Singyang Chumbong', 'subdivision': 'Gyalshing Sub-Division\n\nShri. Sandesh Subba \nSDM\n7548044445\n\n\n\n\nShri. Pulkit \n9306650316\nSDM HQ', 'name': 'Yusb', 'father_name': 'Yhehgd', 'phone': '9999999999'}
2025-07-31 17:20:37,855 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:20:41,277 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:20:41,280 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:20:41,281 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:20:41,281 - __main__ - INFO - 📍 [DEBUG] Has text: 6))hdh did
2025-07-31 17:20:41,281 - __main__ - INFO - [MSG] User 5462740970: 6))hdh did
2025-07-31 17:20:41,282 - __main__ - INFO - [LANG] User 5462740970 using existing language: english
2025-07-31 17:20:41,282 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: 6))hdh did
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:20:41,755 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: unknown
2025-07-31 17:20:41,755 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'scheme_csc_application', 'scheme': 'Ayushman', 'step': 'village', 'available_blocks': ['(BAC CHONGRANG)\n\nMrs. Geeta Gurung\nBDO Chongrang\n9733306361', '(BAC DENTAM)\n\nMr. Ongdi Tsh. Bhutia\nBDO Dentam\n7872972630', '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', '(BAC YUKSAM)\n\n\nMr. S. M. Subba\nBDO Yuksam\n9733227146', 'BAC - Hee Martam'], 'block': '(BAC GYALSHING)\n\nMr. Garap Dorjee Bhutia\nBDO Gyalshing\n9733911961', 'available_gpus': ['Darap Singpheng', 'Gyalshing Municipal Council', 'Gyalshing Omchung', 'Lingchom Tikjya', 'Nambu Sindrabong', 'Singyang Chumbong', 'Tikjuk Kyongsha', 'Yangtey', 'Yangthang'], 'gpu': 'Singyang Chumbong', 'subdivision': 'Gyalshing Sub-Division\n\nShri. Sandesh Subba \nSDM\n7548044445\n\n\n\n\nShri. Pulkit \n9306650316\nSDM HQ', 'name': 'Yusb', 'father_name': 'Yhehgd', 'phone': '9999999999', 'village': '6))hdh did'}
2025-07-31 17:20:41,756 - __main__ - ERROR - ❌ Error logging to Google Sheets: GoogleSheetsService.log_general_interaction() got an unexpected keyword argument 'scheme_name'
2025-07-31 17:20:42,093 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:20:42,096 - __main__ - INFO - 🧹 STATE CLEARED: User 5462740970
2025-07-31 17:20:51,429 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:21:01,576 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:21:11,722 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:21:21,897 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:21:32,061 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:21:42,208 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:21:52,358 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:22:02,506 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:22:12,651 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:22:22,800 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:22:32,947 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:22:43,092 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:22:53,242 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:23:03,390 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:23:13,538 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:23:23,686 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:23:33,838 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:23:43,986 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:23:54,136 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:24:04,288 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:24:14,437 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:24:24,614 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:24:34,772 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:24:44,914 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:24:55,060 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:25:05,211 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:25:15,359 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:25:25,506 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:25:35,655 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:25:45,797 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:25:55,945 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:26:06,090 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:26:16,256 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:26:26,481 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:26:36,639 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:26:46,789 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:26:56,934 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:27:07,083 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:27:17,233 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:27:27,377 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:27:37,520 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:27:47,666 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:27:57,810 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:28:11,129 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 17:28:11,143 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 17:28:11,147 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 17:28:11,147 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 17:28:11,148 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 17:28:11,149 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 17:28:11,150 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 17:28:11,150 - __main__ - INFO - 📍 Location system initialized
2025-07-31 17:28:11,969 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 17:28:12,421 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 17:28:12,564 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 17:28:12,570 - telegram.ext.Application - INFO - Application started
2025-07-31 17:28:22,994 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:28:33,152 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:28:43,303 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:28:53,444 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:29:03,585 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:29:13,728 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:29:23,869 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:29:34,011 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:29:44,151 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:29:54,294 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:30:04,433 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:30:14,576 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:30:24,716 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:30:34,859 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:30:45,011 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:30:55,154 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:31:05,293 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:31:15,432 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:31:25,575 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:31:35,717 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:31:45,868 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:31:56,011 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:32:06,239 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:32:16,383 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:32:26,543 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:32:36,688 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:32:46,833 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:32:56,975 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:33:07,120 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:33:17,288 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:33:27,432 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:33:37,574 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:33:47,719 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:33:57,861 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:34:08,003 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:34:18,227 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:34:28,367 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:34:38,607 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:34:48,750 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:34:58,892 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:35:09,119 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:35:19,260 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:35:29,401 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:35:39,635 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:35:49,777 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:35:59,915 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:36:10,054 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:36:20,197 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:36:30,528 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:36:40,670 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:36:50,811 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:37:00,952 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:37:11,091 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:37:21,233 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:37:31,374 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:37:41,512 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:37:51,659 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:38:01,802 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:38:11,960 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:38:22,145 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:38:32,285 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:38:42,433 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:38:52,658 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:39:13,037 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 17:39:13,066 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 17:39:13,074 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 17:39:13,076 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 17:39:13,076 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 17:39:13,077 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 17:39:13,078 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 17:39:13,078 - __main__ - INFO - 📍 Location system initialized
2025-07-31 17:39:13,888 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 17:39:14,413 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 17:39:14,558 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 17:39:14,561 - telegram.ext.Application - INFO - Application started
2025-07-31 17:39:25,021 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:39:35,161 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:39:45,304 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:39:55,442 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:40:05,584 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:40:15,726 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:40:25,864 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:40:36,007 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:40:46,148 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:40:56,314 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:41:06,459 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:41:16,603 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:41:22,637 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:41:22,642 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:41:22,643 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:41:22,643 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 17:41:22,643 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 17:41:22,644 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 17:41:28,647 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 17:41:28,648 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 17:41:28,648 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:41:28,648 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 17:41:28,649 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 17:41:28,649 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:41:29,198 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 17:41:29,199 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 17:41:30,051 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:41:32,858 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 17:41:33,490 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 17:41:33,492 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:41:33,495 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 17:41:33,809 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:41:33,810 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:41:34,151 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:41:35,653 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 17:41:35,989 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:41:39,144 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:41:39,149 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 17:41:39,462 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:41:39,807 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:41:41,825 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:41:41,827 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 17:41:42,147 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:41:42,483 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:41:44,028 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:41:44,031 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_obc
2025-07-31 17:41:44,345 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:41:44,681 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:41:54,170 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:42:04,352 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:42:14,502 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:42:24,664 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:42:34,868 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:42:45,009 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:43:04,280 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 17:43:04,288 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 17:43:04,294 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 17:43:04,295 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 17:43:04,295 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 17:43:04,296 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 17:43:04,297 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 17:43:04,297 - __main__ - INFO - 📍 Location system initialized
2025-07-31 17:43:05,174 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 17:43:05,691 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 17:43:05,897 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 17:43:05,900 - telegram.ext.Application - INFO - Application started
2025-07-31 17:43:16,480 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:43:16,750 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:43:16,753 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:43:16,754 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:43:16,754 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 17:43:16,755 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 17:43:16,756 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 17:43:19,490 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 17:43:19,490 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 17:43:19,491 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:43:19,491 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 17:43:19,492 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 17:43:19,492 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:43:20,070 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 17:43:20,071 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 17:43:20,675 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:43:22,790 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 17:43:23,385 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 17:43:23,386 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:43:23,390 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 17:43:23,703 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:43:23,704 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:43:24,022 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:43:25,531 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 17:43:25,860 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:43:27,683 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:43:27,687 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 17:43:28,019 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:43:28,345 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:43:33,342 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:43:33,345 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 17:43:33,747 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:43:34,158 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:43:35,822 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:43:35,825 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_obc
2025-07-31 17:43:36,142 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:43:36,488 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:43:45,965 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:43:56,121 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:44:06,264 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:44:16,415 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:44:26,595 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:44:36,738 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:44:46,880 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:44:57,022 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:45:07,164 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:45:23,784 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 17:45:23,792 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 17:45:23,801 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 17:45:23,802 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 17:45:23,802 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 17:45:23,803 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 17:45:23,804 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 17:45:23,804 - __main__ - INFO - 📍 Location system initialized
2025-07-31 17:45:24,689 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 17:45:25,263 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 17:45:25,406 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 17:45:25,411 - telegram.ext.Application - INFO - Application started
2025-07-31 17:45:35,906 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:45:46,085 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:45:56,289 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:46:06,438 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:46:16,584 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:46:24,862 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:46:24,865 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:46:24,865 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:46:24,866 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 17:46:24,866 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 17:46:24,867 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 17:46:27,582 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 17:46:27,583 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 17:46:27,583 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:46:27,583 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 17:46:27,584 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 17:46:27,584 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:46:28,186 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 17:46:28,187 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 17:46:28,825 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:46:30,612 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 17:46:31,144 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 17:46:31,148 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:46:31,152 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 17:46:31,465 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:46:31,468 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:46:31,821 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:46:33,332 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 17:46:33,667 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:46:35,885 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:46:35,889 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 17:46:36,199 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:46:36,529 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:46:42,707 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:46:42,715 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 17:46:43,340 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:46:43,662 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:46:45,182 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:46:45,190 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_obc
2025-07-31 17:46:45,513 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:46:45,522 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'certificate_csc_application', 'certificate_type': 'OBC', 'step': 'block_selection'}
2025-07-31 17:46:45,532 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'certificate_csc_application', 'certificate_type': 'OBC', 'step': 'block_selection', 'available_blocks': ['Yuksam', 'Gyalshing', 'Dentam', 'Hee Martam', 'Arithang Chongrang', 'Gyalshing Municipal Council']}
2025-07-31 17:46:45,927 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:46:48,525 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:46:48,531 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_block_2
2025-07-31 17:46:48,857 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:46:49,207 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:46:58,679 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:47:08,842 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:47:18,988 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:47:29,177 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:47:39,405 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:47:49,555 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:47:59,700 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:48:09,842 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:48:26,553 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 17:48:26,558 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 17:48:26,562 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 17:48:26,563 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 17:48:26,563 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 17:48:26,563 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 17:48:26,564 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 17:48:26,564 - __main__ - INFO - 📍 Location system initialized
2025-07-31 17:48:27,537 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 17:48:28,148 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 17:48:28,353 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 17:48:28,355 - telegram.ext.Application - INFO - Application started
2025-07-31 17:48:38,901 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:48:41,487 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:48:41,491 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:48:41,492 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:48:41,492 - __main__ - INFO - 📍 [DEBUG] Has text: Apply certificates
2025-07-31 17:48:41,493 - __main__ - INFO - [MSG] User 5462740970: Apply certificates
2025-07-31 17:48:41,493 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Apply certificates"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 17:48:44,311 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 17:48:44,311 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 17:48:44,312 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:48:44,312 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 17:48:44,313 - __main__ - INFO - [INTENT] Processing new message: Apply certificates
2025-07-31 17:48:44,313 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Apply certificates
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:48:44,847 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: certificate
2025-07-31 17:48:44,848 - __main__ - INFO - [INTENT] Detected intent: certificate
2025-07-31 17:48:45,578 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:48:47,706 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 17:48:48,319 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 17:48:48,321 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:48:48,325 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 17:48:48,632 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:48:48,956 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:48:50,461 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:48:50,464 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_sc
2025-07-31 17:48:50,777 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:48:51,106 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:48:53,228 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:48:53,233 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_csc_SC
2025-07-31 17:48:53,543 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:48:53,951 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:49:03,377 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:49:13,615 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:49:23,763 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:49:33,916 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:49:44,061 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:49:54,212 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:50:04,357 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:50:14,514 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:50:24,713 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:50:34,857 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:50:45,005 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:50:55,194 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:50:58,611 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:50:58,614 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:50:58,615 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:50:58,615 - __main__ - INFO - 📍 [DEBUG] Has text: Apply for certificates
2025-07-31 17:50:58,615 - __main__ - INFO - [MSG] User 5462740970: Apply for certificates
2025-07-31 17:50:58,617 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Apply for certificates"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 17:51:01,371 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 17:51:01,371 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 17:51:01,372 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:51:01,372 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 17:51:01,372 - __main__ - INFO - [INTENT] Processing new message: Apply for certificates
2025-07-31 17:51:01,373 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Apply for certificates
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:51:01,906 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: certificate
2025-07-31 17:51:01,907 - __main__ - INFO - [INTENT] Detected intent: certificate
2025-07-31 17:51:02,547 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:51:02,989 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 17:51:03,474 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 17:51:04,613 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:51:04,616 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 17:51:04,922 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:51:05,248 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:51:07,291 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:51:07,294 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_income
2025-07-31 17:51:07,603 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:51:07,940 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:51:09,427 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:51:09,430 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_csc_INCOME
2025-07-31 17:51:09,743 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:51:10,133 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:51:19,667 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:51:29,814 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:51:39,965 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:51:50,130 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:52:00,276 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:52:10,453 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:52:20,603 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:52:30,750 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:52:40,893 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:52:51,110 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:53:01,258 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:53:11,412 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:53:14,275 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 17:53:14,282 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 17:53:14,289 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 17:53:14,290 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 17:53:14,290 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 17:53:14,291 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 17:53:14,292 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 17:53:14,292 - __main__ - INFO - 📍 Location system initialized
2025-07-31 17:53:15,173 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 17:53:15,693 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 17:53:15,983 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 17:53:15,989 - telegram.ext.Application - INFO - Application started
2025-07-31 17:53:16,419 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 17:53:16,421 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 17:53:16,422 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 17:53:20,584 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 17:53:20,585 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 17:53:20,586 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 17:53:21,750 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 17:53:21,751 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 17:53:21,752 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 17:53:26,424 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 17:53:26,429 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 17:53:26,430 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 17:53:28,180 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 409 Conflict"
2025-07-31 17:53:28,181 - telegram.ext.Updater - ERROR - Error while getting Updates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 17:53:28,182 - __main__ - ERROR - [ERROR] Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
Traceback (most recent call last):
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 688, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 558, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 525, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3584, in get_updates
    await self._post(
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 613, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 340, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 641, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abhis\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 381, in _request_wrapper
    raise Conflict(message)
telegram.error.Conflict: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-07-31 17:53:46,837 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 17:53:46,844 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 17:53:46,850 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 17:53:46,851 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 17:53:46,851 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 17:53:46,851 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 17:53:46,852 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 17:53:46,852 - __main__ - INFO - 📍 Location system initialized
2025-07-31 17:53:47,559 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 17:53:48,024 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 17:53:48,170 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 17:53:48,173 - telegram.ext.Application - INFO - Application started
2025-07-31 17:53:58,626 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:54:08,774 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:54:18,970 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:54:29,112 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:54:39,257 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:54:49,402 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:54:59,622 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:55:09,770 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:55:19,913 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:55:30,066 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:55:35,067 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:55:35,070 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 17:55:35,071 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 17:55:35,071 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 17:55:35,071 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 17:55:35,072 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 17:55:37,883 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 17:55:37,884 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 17:55:37,884 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:55:37,884 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 17:55:37,886 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 17:55:37,886 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Birth certificate", "Document"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 17:55:38,448 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 17:55:38,448 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 17:55:39,355 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 17:55:41,811 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 17:55:42,327 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 17:55:42,331 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:55:42,334 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 17:55:42,646 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:55:42,648 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 17:55:43,040 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:55:44,545 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 17:55:44,886 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:55:48,386 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:55:48,391 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 17:55:48,701 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:55:49,033 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:55:54,889 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:55:54,891 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 17:55:55,521 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:55:55,854 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:55:57,414 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:55:57,418 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_obc
2025-07-31 17:55:57,724 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:55:58,057 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:56:00,142 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:56:00,145 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_csc_OBC
2025-07-31 17:56:00,461 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 17:56:00,800 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 17:56:10,290 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:56:20,435 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:56:30,576 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:56:40,726 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:56:50,901 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:57:01,049 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:57:11,201 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:57:21,357 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:57:31,503 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:57:41,648 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:58:32,223 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 17:58:32,235 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 17:58:32,242 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 17:58:32,243 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 17:58:32,243 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 17:58:32,244 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 17:58:32,244 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 17:58:32,246 - __main__ - INFO - 📍 Location system initialized
2025-07-31 17:58:33,009 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 17:58:33,579 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 17:58:33,717 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 17:58:33,719 - telegram.ext.Application - INFO - Application started
2025-07-31 17:58:44,187 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:58:54,329 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:59:04,472 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:59:14,617 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:59:24,760 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:59:34,913 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:59:45,057 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 17:59:55,207 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:00:21,413 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 18:00:21,420 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 18:00:21,423 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 18:00:21,423 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 18:00:21,424 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 18:00:21,424 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 18:00:21,424 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 18:00:21,425 - __main__ - INFO - 📍 Location system initialized
2025-07-31 18:00:22,179 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 18:00:22,798 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 18:00:22,948 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 18:00:22,953 - telegram.ext.Application - INFO - Application started
2025-07-31 18:00:33,449 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:00:43,592 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:00:53,737 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:01:03,962 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:01:14,107 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:01:24,340 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:01:34,485 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:01:44,639 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:01:54,784 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:02:04,933 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:02:15,081 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:02:19,759 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:02:19,762 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 18:02:19,762 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 18:02:19,762 - __main__ - INFO - 📍 [DEBUG] Has text: Apply for certificates
2025-07-31 18:02:19,763 - __main__ - INFO - [MSG] User 5462740970: Apply for certificates
2025-07-31 18:02:19,764 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Apply for certificates"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 18:02:25,416 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 18:02:25,416 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 18:02:25,417 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 18:02:25,417 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 18:02:25,418 - __main__ - INFO - [INTENT] Processing new message: Apply for certificates
2025-07-31 18:02:25,418 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates (apply for certificate, certificate application, birth certificate, income certificate, etc.)
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Apply for certificates", "Birth certificate", "Income certificate", "Document", "Certificate application"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Apply for certificates
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 18:02:25,967 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: certificate
2025-07-31 18:02:25,967 - __main__ - INFO - [INTENT] Detected intent: certificate
2025-07-31 18:02:26,614 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 18:02:28,853 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 18:02:29,419 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 18:02:29,906 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:02:40,129 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:02:43,434 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:02:43,438 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 18:02:44,078 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:02:44,417 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:02:46,225 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:02:46,228 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_obc
2025-07-31 18:02:46,579 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:02:46,919 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:02:48,673 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:02:48,675 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_csc_OBC
2025-07-31 18:02:48,991 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:02:49,339 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:02:58,820 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:03:08,963 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:03:19,107 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:03:29,250 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:03:39,393 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:03:49,537 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:03:59,679 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:04:09,821 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:04:20,000 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:04:30,226 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:04:40,369 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:09:03,100 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 18:09:03,107 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 18:09:03,113 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 18:09:03,114 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 18:09:03,114 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 18:09:03,114 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 18:09:03,115 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 18:09:03,115 - __main__ - INFO - 📍 Location system initialized
2025-07-31 18:09:03,993 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 18:09:04,452 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 18:09:04,605 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 18:09:04,608 - telegram.ext.Application - INFO - Application started
2025-07-31 18:09:05,019 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:09:05,022 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 18:09:05,022 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 18:09:05,023 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 18:09:05,023 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 18:09:05,024 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 18:09:10,168 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 18:09:10,168 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 18:09:10,169 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 18:09:10,169 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 18:09:10,170 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 18:09:10,170 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates (apply for certificate, certificate application, birth certificate, income certificate, etc.)
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Apply for certificates", "Birth certificate", "Income certificate", "Document", "Certificate application"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 18:09:10,632 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 18:09:10,633 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 18:09:11,237 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 18:09:14,448 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 18:09:15,039 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 18:09:15,166 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:09:25,345 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:09:35,493 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:09:45,634 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:09:53,970 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:09:53,974 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 18:09:54,584 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:09:54,585 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 18:09:54,902 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:09:56,408 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 18:09:56,734 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:09:58,716 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:09:58,722 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 18:09:59,030 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:09:59,407 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:10:02,138 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:10:02,143 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 18:10:02,552 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:10:02,904 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:10:03,906 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:10:03,910 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_obc
2025-07-31 18:10:04,215 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:10:04,539 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:10:06,566 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:10:06,573 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_csc_OBC
2025-07-31 18:10:06,901 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:10:07,228 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:10:16,720 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:10:26,868 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:10:37,109 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:10:47,251 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:10:57,393 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:11:07,533 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:11:17,682 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:11:27,826 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:11:37,972 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:11:48,110 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:11:58,254 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:12:08,396 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:12:18,543 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:12:28,691 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:12:38,837 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:12:48,983 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:12:59,129 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:13:09,278 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:13:20,149 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 18:13:20,154 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 18:13:20,158 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 18:13:20,159 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 18:13:20,159 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 18:13:20,159 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 18:13:20,160 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 18:13:20,160 - __main__ - INFO - 📍 Location system initialized
2025-07-31 18:13:20,832 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 18:13:21,304 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 18:13:21,463 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 18:13:21,466 - telegram.ext.Application - INFO - Application started
2025-07-31 18:13:30,106 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:13:30,109 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 18:13:30,109 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 18:13:30,109 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 18:13:30,110 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 18:13:30,110 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 18:13:32,727 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 18:13:32,727 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 18:13:32,727 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 18:13:32,727 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 18:13:32,728 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 18:13:32,728 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates (apply for certificate, certificate application, birth certificate, income certificate, etc.)
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Apply for certificates", "Birth certificate", "Income certificate", "Document", "Certificate application"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 18:13:33,212 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 18:13:33,212 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 18:13:33,891 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 18:13:35,444 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 18:13:35,927 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 18:13:35,928 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:13:35,930 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 18:13:36,236 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:13:36,237 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 18:13:36,573 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:13:38,076 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 18:13:38,406 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:13:40,167 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:13:40,170 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 18:13:40,475 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:13:40,800 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:13:42,197 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:13:42,200 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 18:13:42,523 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:13:42,857 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:13:44,292 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:13:44,295 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_obc
2025-07-31 18:13:44,620 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:13:44,622 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'certificate_csc_application', 'certificate_type': 'OBC', 'step': 'block_selection'}
2025-07-31 18:13:44,623 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'certificate_csc_application', 'certificate_type': 'OBC', 'step': 'block_selection', 'available_blocks': ['Yuksam', 'Gyalshing', 'Dentam', 'Hee Martam', 'Arithang Chongrang', 'Gyalshing Municipal Council']}
2025-07-31 18:13:44,952 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:13:46,648 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:13:46,650 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_block_0
2025-07-31 18:13:47,003 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:13:47,336 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:13:56,817 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:14:07,063 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:14:17,202 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:14:27,352 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:14:37,493 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:14:47,636 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:14:57,796 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:15:07,943 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:15:18,086 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:15:34,684 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 18:15:34,690 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 18:15:34,695 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 18:15:34,695 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 18:15:34,695 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 18:15:34,695 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 18:15:34,695 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 18:15:34,696 - __main__ - INFO - 📍 Location system initialized
2025-07-31 18:15:35,458 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 18:15:36,089 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 18:15:36,278 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 18:15:36,280 - telegram.ext.Application - INFO - Application started
2025-07-31 18:15:46,838 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:15:48,756 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:15:48,758 - __main__ - INFO - 📍 [DEBUG] Message type: <class 'telegram._message.Message'>
2025-07-31 18:15:48,758 - __main__ - INFO - 📍 [DEBUG] Has location: None
2025-07-31 18:15:48,759 - __main__ - INFO - 📍 [DEBUG] Has text: Hello
2025-07-31 18:15:48,760 - __main__ - INFO - [MSG] User 5462740970: Hello
2025-07-31 18:15:48,760 - __main__ - INFO - 🔍 [LLM] Language Detection Prompt: Analyze this text and determine if it's English, Hindi, or Nepali.
            
            Text to analyze: "Hello"
            
            CRITICAL DETECTION RULES:
            
            HINDI INDICATORS (Romanized):
            - Key words: mereko, mujhe, main, aap, tum, karna, chahiye, hai, hain
            - Grammar: verb + hain/hai (karna hain, chahiye hai)
            - Pronouns: mereko, mujhe, main, aap, tum
            - Question words: kya, kaise, kahan, kab, kyun, kaun
            
            NEPALI INDICATORS (Romanized):
            - Key words: malai, ma, tapai, timi, garna, chahincha, chha, hun
            - Grammar: verb + chha/chhan (garna chha, chahincha)
            - Pronouns: malai, ma, tapai, timi
            - Question words: ke, kasari, kahaan, kahile, kina, ko
            
            ENGLISH INDICATORS:
            - Pure English vocabulary and grammar
            - No Hindi/Nepali words mixed in
            
            DECISION RULES:
            1. If text contains "mereko", "mujhe", "karna hain", "chahiye" → HINDI
            2. If text contains "malai", "garna chha", "chahincha" → NEPALI
            3. If text is pure English → ENGLISH
            4. For mixed text, identify the dominant language based on grammar patterns
            
            Examples:
            - "Mereko ex gratia apply karna hain" → HINDI (mereko + karna hain)
            - "Malai certificate apply garna chha" → NEPALI (malai + garna chha)
            - "I want to apply for ex gratia" → ENGLISH (pure English)
            
            Respond with EXACTLY one word: english, hindi, or nepali
2025-07-31 18:15:51,467 - __main__ - INFO - 🤖 [LLM] Language Detection Response: english
2025-07-31 18:15:51,468 - __main__ - INFO - ✅ Language detected by Qwen: english
2025-07-31 18:15:51,468 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 18:15:51,468 - __main__ - INFO - [LANG] User 5462740970 language detected: english
2025-07-31 18:15:51,468 - __main__ - INFO - [INTENT] Processing new message: Hello
2025-07-31 18:15:51,469 - __main__ - INFO - 🎯 [LLM] Intent Classification Prompt: You are an intent classifier for Sajilo Sewak, a government services chatbot in Sikkim. Given the user's message, classify it into one of these intents:

Available intents:
- greeting: User is saying hello, hi, namaste, or starting a conversation (hello, hi, namaste, good morning, etc.)
- ex_gratia: User wants to APPLY for ex-gratia assistance (action-oriented)
- check_status: User wants to check status of their application
- relief_norms: User asks about relief norms, policies, eligibility criteria, or general questions about ex-gratia
- emergency: User needs emergency help (ambulance, police, fire)
- tourism: User wants tourism/homestay services
- complaint: User wants to file a complaint
- certificate: User wants to apply for certificates (apply for certificate, certificate application, birth certificate, income certificate, etc.)
- csc: User wants CSC (Common Service Center) services
- scheme: User wants to apply for government schemes (PM-KISAN, scholarships, youth schemes, health schemes, etc.)
- cancel: User wants to cancel, stop, go back, or return to main menu (cancel, stop, quit, exit, back, home, band karo, रद्द करें, बंद करो)
- unknown: If none of the above match

Example messages for each intent:
- greeting: "Hello", "Hi", "Namaste", "Good morning", "Namaskar", "Kya haal hai", "K cha", "How are you"
- ex_gratia: "I want to apply for compensation", "Apply for ex gratia", "I need to file ex-gratia claim", "Start ex-gratia application"
- relief_norms: "What is ex gratia?", "How much compensation will I get?", "What are the eligibility criteria?", "Kya mujhe ex gratia milega?", "Ex gratia kya hain?"
- check_status: "What's the status of my application?", "Track my ex-gratia request", "Any update on my claim?"
- emergency: "Need ambulance", "Call police", "Fire emergency"
- tourism: "Book homestay", "Tourist places", "Accommodation"
- complaint: "File complaint", "Register grievance", "Report issue"
- certificate: "Apply for certificate", "Apply for certificates", "Birth certificate", "Income certificate", "Document", "Certificate application"
- csc: "Find CSC", "CSC operator", "Common Service Center"
- scheme: "I want to apply for PM-KISAN", "Apply for scholarship", "Government schemes", "PM-KISAN scheme", "Youth scheme", "Health scheme", "Farmer scheme"

User message: Hello
Language: english

Respond with ONLY one of the intent names listed above, nothing else.
2025-07-31 18:15:51,944 - __main__ - INFO - 🎯 [LLM] Intent Classification Response: greeting
2025-07-31 18:15:51,944 - __main__ - INFO - [INTENT] Detected intent: greeting
2025-07-31 18:15:52,560 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/sendMessage "HTTP/1.1 200 OK"
2025-07-31 18:15:54,342 - google_sheets_service - INFO - ✅ Sheet already exists: General_Interactions
2025-07-31 18:15:54,812 - google_sheets_service - INFO - ✅ Row appended to General_Interactions: 1 rows
2025-07-31 18:15:54,813 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:15:54,817 - __main__ - INFO - [CALLBACK] Received from 5462740970: lang_english
2025-07-31 18:15:55,128 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:15:55,129 - __main__ - INFO - 🌐 LANGUAGE SET: User 5462740970 → english
2025-07-31 18:15:55,451 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:15:56,966 - __main__ - INFO - [USER] New conversation started by user 5462740970
2025-07-31 18:15:57,301 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:15:58,943 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:15:58,948 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate
2025-07-31 18:15:59,251 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:15:59,580 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:16:00,795 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:16:00,796 - __main__ - INFO - [CALLBACK] Received from 5462740970: certificate_csc
2025-07-31 18:16:01,179 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:16:01,505 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:16:02,727 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:16:02,730 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_type_obc
2025-07-31 18:16:03,056 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:16:03,059 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'certificate_csc_application', 'certificate_type': 'OBC', 'step': 'block_selection'}
2025-07-31 18:16:03,059 - __main__ - INFO - 🔒 STATE UPDATE: User 5462740970 → {'workflow': 'certificate_csc_application', 'certificate_type': 'OBC', 'step': 'block_selection', 'available_blocks': ['Yuksam', 'Gyalshing', 'Dentam', 'Hee Martam', 'Arithang Chongrang', 'Gyalshing Municipal Council']}
2025-07-31 18:16:03,389 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:16:04,545 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:16:04,548 - __main__ - INFO - [CALLBACK] Received from 5462740970: cert_block_3
2025-07-31 18:16:04,865 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/answerCallbackQuery "HTTP/1.1 200 OK"
2025-07-31 18:16:05,362 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/editMessageText "HTTP/1.1 200 OK"
2025-07-31 18:16:14,689 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:16:24,832 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:16:34,971 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:16:45,126 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:16:55,274 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:17:08,870 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 18:17:08,875 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 18:17:08,880 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 18:17:08,880 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 18:17:08,880 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 18:17:08,880 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 18:17:08,881 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 18:17:08,881 - __main__ - INFO - 📍 Location system initialized
2025-07-31 18:17:09,525 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 18:17:10,038 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 18:17:10,181 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 18:17:10,185 - telegram.ext.Application - INFO - Application started
2025-07-31 18:17:20,611 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:17:30,755 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:17:40,896 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:17:51,036 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:18:01,181 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:18:11,323 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:18:21,467 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:18:31,608 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:18:41,751 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:18:51,983 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:19:02,128 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:19:12,278 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:19:22,423 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:19:32,620 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:19:42,763 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:19:52,907 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:20:03,046 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:20:13,235 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getUpdates "HTTP/1.1 200 OK"
2025-07-31 18:20:30,743 - __main__ - INFO - 📚 Data files from Excel sheet loaded successfully
2025-07-31 18:20:30,755 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-07-31 18:20:30,760 - google_sheets_service - INFO - ✅ Google Sheets API authenticated successfully with service account
2025-07-31 18:20:30,762 - __main__ - INFO - ✅ Google Sheets service initialized successfully
2025-07-31 18:20:30,762 - __main__ - INFO - 🔗 NC Exgratia API client initialized
2025-07-31 18:20:30,763 - __main__ - INFO - 🔒 MULTI-USER SUPPORT: Thread-safe state management initialized
2025-07-31 18:20:30,765 - simple_location_system - INFO - 📍 Simple Location System initialized
2025-07-31 18:20:30,765 - __main__ - INFO - 📍 Location system initialized
2025-07-31 18:20:31,358 - __main__ - INFO - 🚀 Starting Sajilo Sewak Bot...
2025-07-31 18:20:31,817 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/getMe "HTTP/1.1 200 OK"
2025-07-31 18:20:31,958 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7641958089:AAH2UW5H0EX9pGfE6wZZaURCpkyMHtJK8zw/deleteWebhook "HTTP/1.1 200 OK"
2025-07-31 18:20:31,961 - telegram.ext.Application - INFO - Application started
